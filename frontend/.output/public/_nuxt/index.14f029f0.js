import{r as I,q as F,s as M,x as S,e as h,f as t,u,i as l,y as z,t as m,z as k,m as f,w as L,v as D,k as E,F as N,A as T,o as g}from"./entry.b39bc07b.js";import{u as q}from"./fetch.fff8b5fc.js";const P=""+globalThis.__publicAssetsURL("img/load.gif"),X=""+globalThis.__publicAssetsURL("img/error.jpg");const Y={id:"refresh"},G=["disabled"],H={key:0,src:P,style:{height:"0.88em"}},J={key:0},K=t("h3",null,"Data se nepodaÅ™ilo naÄÃ­st! Sorry",-1),O=t("img",{src:X,alt:"Sorry Error",style:{width:"100%"}},null,-1),Q={key:1},W=["onClick"],Z=["onClick"],ee=t("th",null,`
          ID
        `,-1),te=["onClick"],ne=["onClick"],se=["onClick"],re=["onClick"],le=["onClick"],ae=["onClick"],ie={style:{color:"#777"}},oe=t("br",null,null,-1),ue={style:{color:"#777"}},de=t("br",null,null,-1),V=7777,pe={__name:"index",setup(ce){const C=I(""),y=I(""),b=I(!1),s=F({nick_up:!1,nick_down:!1,addr_up:!1,addr_down:!1,age_up:!1,age_down:!1,create_up:!1,create_down:!1}),w=q("http://localhost:54321/api/status","$PslAyef5YX");M(()=>{setTimeout(x,100),console.log("the component is now mounted.")});const U=S(()=>{const i=w.data;if(w.data.value==null)return b.value=!0,[];b.value=!1;let e=[];const a=C.value==""?new RegExp(/.*/):new RegExp(C.value,"i"),v=y.value==""?new RegExp(/.*/):new RegExp(y.value,"i");for(let n=0;n<i.value.length;n++){const r=i.value[n];a.test(r.nick)&&v.test(r.addresses.join(" "))&&e.push(r)}for(let n=0;n<e.length;n++)e[n].addresses=e[n].addresses.sort((r,d)=>{const c=Number(r.split(".").map(_=>`000${_}`.slice(-3)).join("")),o=Number(d.split(".").map(_=>`000${_}`.slice(-3)).join(""));return c-o});return s.nick_down?e.sort((n,r)=>{let d=n.nick.toLowerCase(),c=r.nick.toLowerCase();return d.localeCompare(c,void 0,{numeric:!0,sensitivity:"base"})}):s.nick_up?e.sort((n,r)=>{let d=n.nick.toLowerCase();return r.nick.toLowerCase().localeCompare(d,void 0,{numeric:!0,sensitivity:"base"})}):s.addr_down?e.sort((n,r)=>{let d="";for(let o=0;o<n.addresses.length;o++)d+=n.addresses[o].split(".").map(_=>`000${_}`.slice(-3)).join("");let c="";for(let o=0;o<r.addresses.length;o++)c+=r.addresses[o].split(".").map(_=>`000${_}`.slice(-3)).join("");return d<c?-1:d>c?1:0}):s.addr_up?e.sort((n,r)=>{let d="";for(let o=0;o<n.addresses.length;o++)d+=n.addresses[o].split(".").map(_=>`000${_}`.slice(-3)).join("");let c="";for(let o=0;o<r.addresses.length;o++)c+=r.addresses[o].split(".").map(_=>`000${_}`.slice(-3)).join("");return d<c?1:d>c?-1:0}):s.age_down?e.sort((n,r)=>r.atime_stamp-n.atime_stamp):s.age_up?e.sort((n,r)=>n.atime_stamp-r.atime_stamp):s.create_down?e.sort((n,r)=>r.ctime_stamp-n.ctime_stamp):s.create_up?e.sort((n,r)=>n.ctime_stamp-r.ctime_stamp):e});let R=setInterval(x,V);const j=I(!1);async function x(){j.value=!0;try{await w.refresh(),w.data.value==null?b.value=!0:b.value=!1}finally{j.value=!1}}function B(i){clearInterval(R),x(),R=setInterval(x,V)}function p(i){for(let e in s)e==i.target.id?s[e]=!0:s[e]=!1}function $(i){let e="";for(let a in s)s[a]&&(e=a);e.includes(i)?(s[i+"_up"]=!s[i+"_up"],s[i+"_down"]=!s[i+"_down"]):(s[e]=!1,s[i+"_down"]=!0)}function A(i){var e,a,v;e=parseInt(i/24/60/60),i%=24*60*60,a=parseInt(i/60/60),i%=60*60,v=parseInt(i/60),i%=60;var n="",r=!0,d=!0;return e&&(n+=e+" days",d=!1,r=!1),a&&(n+=" "+a+" hours",r=!1),v&&d&&(n+=" "+v+" minutes"),r&&(n+=" "+i+" seconds"),n}return(i,e)=>(g(),h("div",null,[t("div",Y,[t("button",{disabled:u(j),onClick:B},"Refetch",8,G)]),l(),t("h2",null,[l(`Table of nicks
    `),u(w).pending.value?(g(),h("img",H)):z("",!0)]),l(),u(b)?(g(),h("div",J,[K,l(),t("p",null,m(u(w).error),1),l(),O])):(g(),h("table",Q,[t("thead",null,[t("tr",null,[t("th",null,[t("a",{href:"#",id:"nick_down",class:k([u(s),{active:u(s).nick_down}]),onClick:f(p,["prevent"])},"ðŸ ›",10,W),l(),t("a",{href:"#",id:"nick_up",class:k([u(s),{active:u(s).nick_up}]),onClick:f(p,["prevent"])},"ðŸ ™",10,Z),l(),t("a",{href:"#",onClick:e[0]||(e[0]=f(a=>$("nick"),["prevent"]))},"Nick "),l(),L(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>E(C)?C.value=a:null),type:"text",placeholder:"filter"},null,512),[[D,u(C)]])]),l(),ee,l(),t("th",null,[t("a",{href:"#",id:"addr_down",class:k({active:u(s).addr_down}),onClick:f(p,["prevent"])}," ðŸ › ",10,te),l(),t("a",{href:"#",id:"addr_up",class:k({active:u(s).addr_up}),onClick:f(p,["prevent"])}," ðŸ ™ ",10,ne),l(),t("a",{href:"#",onClick:e[2]||(e[2]=f(a=>$("addr"),["prevent"]))},"Addresses "),l(),L(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>E(y)?y.value=a:null),type:"text",placeholder:"filter"},null,512),[[D,u(y)]])]),l(),t("th",null,[t("a",{href:"#",id:"age_down",class:k({active:u(s).age_down}),onClick:f(p,["prevent"])}," ðŸ › ",10,se),l(),t("a",{href:"#",id:"age_up",class:k({active:u(s).age_up}),onClick:f(p,["prevent"])}," ðŸ ™ ",10,re),l(),t("a",{href:"#",onClick:e[4]||(e[4]=f(a=>$("age"),["prevent"]))},"Age")]),l(),t("th",null,[t("a",{href:"#",id:"create_down",class:k({active:u(s).create_down}),onClick:f(p,["prevent"])}," ðŸ › ",10,le),l(),t("a",{href:"#",id:"create_up",class:k({active:u(s).create_up}),onClick:f(p,["prevent"])}," ðŸ ™ ",10,ae),l(),t("a",{href:"#",onClick:e[5]||(e[5]=f(a=>$("create"),["prevent"]))},"Create")])])]),l(),t("tbody",null,[(g(!0),h(N,null,T(u(U),a=>(g(),h("tr",{key:a.nick},[t("td",null,m(a.nick),1),l(),t("td",null,m(a.id),1),l(),t("td",null,[t("ul",null,[(g(!0),h(N,null,T(a.addresses,v=>(g(),h("li",{key:v},m(v),1))),128))])]),l(),t("td",null,[t("span",ie,m(a.atime),1),oe,l(" "+m(A(a.atime_diff)),1)]),l(),t("td",null,[t("span",ue,m(a.ctime),1),de,l(" "+m(A(a.ctime_diff)),1)])]))),128))])]))]))}};export{pe as default};
